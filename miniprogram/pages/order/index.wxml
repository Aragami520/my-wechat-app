<view class="container">
  
  <view class="empty-box" wx:if="{{orderList.length === 0}}">
    <view class="empty-text">æš‚æ— è®¢å•</view>
  </view>

  <block wx:else>
    <view class="order-card" wx:for="{{orderList}}" wx:key="_id">
      
      <view class="card-header">
        <text class="time">{{item.timeStr}}</text>
        <view class="status-box">
          <text wx:if="{{item.status === 'PAID'}}" style="color:#fa8c16">å¾…å‘è´§</text>
          <text wx:elif="{{item.status === 'SHIPPED'}}" style="color:#1aad19">é…é€ä¸­</text>
          <text wx:elif="{{item.status === 'REFUNDING'}}" style="color:#ff4d4f">é€€æ¬¾ä¸­</text>
          <text wx:elif="{{item.status === 'REFUNDED'}}" style="color:#999">å·²é€€æ¬¾</text>
          <text wx:else>{{item.status}}</text>
        </view>
      </view>

      <view class="card-body">
        <image class="goods-img" src="{{item.image}}" mode="aspectFill"></image>
        <view class="goods-info">
          <view class="goods-name">{{item.productName || item.name}}</view>
          <view class="goods-detail">æ•°é‡ x{{item.count}}</view>
          <view class="goods-price"><text class="currency">Â¥</text>{{item.totalPrice}}</view>
        </view>
      </view>

      <view class="express-box" wx:if="{{item.expressNo}}">
        <view class="express-row">
          <text class="exp-label">ç‰©æµå•å·</text>
          <text class="exp-no" selectable>{{item.expressNo}}</text>
        </view>
        <view style="display:flex;">
          <view class="btn-copy" bindtap="copyNo" data-no="{{item.expressNo}}">å¤åˆ¶</view>
        </view>
      </view>

      <view class="card-footer">
        
        <view class="btn btn-trace" 
              wx:if="{{item.expressNo}}" 
              bindtap="viewLogistics" 
              data-no="{{item.expressNo}}">
          ğŸ” æŸ¥ç‰©æµ
        </view>

        <view class="btn btn-refund" 
              wx:if="{{item.status === 'PAID' || item.status === 'SHIPPED'}}" 
              bindtap="applyRefund" 
              data-item="{{item}}">
          ç”³è¯·é€€æ¬¾
        </view>

        <view class="btn btn-delete" 
              bindtap="deleteOrder" 
              data-id="{{item._id}}">
          åˆ é™¤
        </view>

      </view>

    </view>
  </block>
  
  <view class="footer-tip">-- åˆ°åº•å•¦ --</view>
</view>