<block wx:if="{{isAdmin}}">
<view class="container">
  
  <view class="header-status">
    <view class="shop-name">ğŸŒ½ å±±è¥¿æºå¤´ç³¯ç‰ç±³ Â· å•†å®¶æ§åˆ¶å°</view>
    <view class="live-tag"><view class="dot"></view> å®æ—¶ç›‘æ§ä¸­</view>
  </view>

  <view class="dashboard-grid">
    <view class="card green-border">
      <view class="card-header"><text>ä»Šæ—¥æˆäº¤ (å…ƒ)</text></view>
      <view class="card-num">Â¥ {{stats.todaySales}}</view>
    </view>
    <view class="card blue-border">
      <view class="card-header"><text>ä»Šæ—¥è®¢å• (ç¬”)</text></view>
      <view class="card-num">{{stats.todayCount}}</view>
    </view>
    <view class="card orange-border">
      <view class="card-header"><text>å¾…å‘è´§</text></view>
      <view class="card-num" style="color: #ff7a45">{{stats.pendingShip}}</view>
    </view>
    <view class="card purple-border">
      <view class="card-header"><text>é€€æ¬¾ç”³è¯·</text></view>
      <view class="card-num" style="color: #ff4d4f">{{stats.pendingRefund}}</view>
    </view>
  </view>

  <view class="order-section">
    <view class="section-title">ğŸ“¦ å¾…å‘è´§ / å¾…å¤„ç† ({{pendingOrders.length}})</view>

    <block wx:if="{{pendingOrders.length > 0}}">
      <view class="order-item" wx:for="{{pendingOrders}}" wx:key="_id">
        
        <view class="item-top">
          <text class="time">{{item.createTimeStr}}</text>
          <text class="status-tag" 
                style="{{item.displayStatus.indexOf('é€€æ¬¾') > -1 ? 'color:#ff4d4f; background:#fff1f0; border:1px solid #ffa39e' : ''}}">
            {{item.displayStatus}}
          </text>
        </view>
        
        <view class="product-box">
          <text class="p-name">{{item.productName || 'ç³¯ç‰ç±³'}}</text>
          <text class="p-count">x {{item.count}}</text>
          <text class="p-price">Â¥{{item.totalFee / 100}}</text>
        </view>

        <view class="address-card">
          <view class="user-row">
            <text class="u-name">{{item.address.userName}}</text>
            <text class="u-phone" selectable user-select>{{item.address.telNumber}}</text>
            <view class="copy-btn" bindtap="copyAddress" data-address="{{item.address}}">å¤åˆ¶ä¿¡æ¯</view>
          </view>
          <view class="u-address" selectable user-select>
            {{item.address.provinceName}}{{item.address.cityName}}{{item.address.countyName}} {{item.address.detailInfo}}
          </view>
          <view class="u-remark" wx:if="{{item.remark}}">
            <text class="tag">å¤‡æ³¨</text> {{item.remark}}
          </view>
        </view>

        <view class="item-actions">
          <button class="btn btn-refund" size="mini" bindtap="handleRefund" data-id="{{item._id}}">é€€æ¬¾/æ‹’ç»</button>
          <button class="btn btn-ship" size="mini" bindtap="handleShip" data-id="{{item._id}}">å¡«å•å‘è´§</button>
        </view>
      </view>
    </block>

    <view wx:else class="empty-state">
      <view style="font-size: 60rpx; margin-bottom: 20rpx;">ğŸµ</view>
      <text>æš‚æ— æ–°è®¢å•ï¼Œä¼‘æ¯ä¸€ä¸‹å§</text>
    </view>
  </view>
</view>
</block>